# 04. 서버 서비스 Amazon EC2

### 1.  Amazon EC2란: 짧은 시간에 실행 환경을 구축할 수 있는 가상 서버

1. Amazon EC2란?
   - Amaozn Elastic Compute Cloud(Amazon EC2)
   - 컴퓨팅 용량을 제공하는 서비스, 서버에 필요한 세트를 클라우드에서 대여
   - 매니지드 서비스가 아니다. 서버 및 네트워크 운영은 AWS가 담당하지만, OS를 포함하여 필요한 소프트웨어는 사용자가 직접 설치하고 운영해야 한다.
2. 클릭 한 번으로 최적의 서버를 만들 수 있다
3. 바로 생성할 수 있고 바로 삭제할 수 있다



### 2. EC2의 사용 절차: 가상 서버를 사용하기까지

1. EC2 운영
2. EC2 서비스의 기능
   - 인스턴스: AWS 클라우드에 생성한 가상 서버, AMI로 같은 구성의 서버를 생성할 수 있다.
   - AMI: 가상 이미지, 인스턴스를 생성하는 기준이 되는 금형
   - 키 페어: 인스턴스에 접속할 때 인증을 위해 사용하는 키
   - EBS: AWS 클라우드에서 사용할 수 있는 스토리지, 인스턴스 스토리지로 사용
   - 보안 그룹: 가상 방화벽으로 1개 이상의 인스턴스 트래픽을 제한
   - Elastic IP: 정적(고정) IPv4 주소
3. EC2의 사용 절차
   - 관리 콘솔에서 EC2 대시보드를 열고 인스턴스를 생성, 인스턴스가 생성되면 SSH에 접속
   - 일반 서버와 동일하게 컴퓨터 사양과 OS 종류, 소프트웨어, 네트워크와 IP 주소, 보안 설정이 필요
4. 인스턴스 설정 항목



### 3. 인스턴스 생성과 요금: 가상 서버 생성 예시



### 4. AMI: OS 및 소프트웨어가 설치된 디스크 이미지

1. AMI와 인스턴스
   - AMI(Amazon Machine Image): 소프트웨어 구성을 기록한 템플릿
   - 같은 서버를 여러 대 구축해야 할 경우에 편리하다
2. 제공되는 OS 이미지
3. AMI 요금
4. AMI를 직접 만들어 보자



### 5. 인스턴스 유형: 용도에 맞게 머신을 선택하자

1. 인스턴스 유형이란
   - 머신의 용도
   - 다섯 가지로 구분되어 있고 각 여러 인스턴스 유형이 존재
2. 인스턴스의 유형과 크기



### 6. Amazon EBS: Amazon EC2의 스토리지 볼륨

1. EBS란
   - Amazon EBS(Amazon Elastic Block Store): 영구적인 블록 스토리지 볼륨, EC2 인스턴스와 조합해 사용
   - 고성능이라면 SSD, 저비용이라면 HHD
2. EBS의 볼륨 유형
3. EBS의 기능과 요금



### 7. SSH를 사용한 접속과 키 페어: 공개키 암호 방식을 이용한 접근 관리

1. SSH로 접속하기
2. 키 페어란



### 8. Elastic IP 주소: 고정 공인 IP 주소를 부여

1. Elastic IP주소란
   - AWS가 제공하는 정적인 공인(public) IPv4 주소
   - EC2 인스턴스는 정지 후 다시 시작하면 공인 IP 주소가 바뀌기 때문에 고정 IP 주소를 인스턴스와 연결해야 한다.
2. Elastic IP 주소의 확보와 부여
   - Elastic IP 주소는 AWS 계정에 연결되어 있다. 인스턴스 단위가 아니므로 IP 주소를 부여한 인스턴스를 삭제해도 확보한 IP 주소는 그대로 AWS 계정에서 소유하는 것이 가능하다.
   - 인스턴스에 이미 할당되어 있는 공인 IP 대신 Elastic IP 주소를 할당하면 AWS 공인 IPv4 주소 풀로 되돌아간다.
3. Elastic IP 주소의 요금



### 9. Elastic Load Balancing: 트래픽을 분배하는 분산 장치

1. ELB란
   - ELB(Elastic Load Balancing): AWS가 제공하는 로드 밸런서
     - 로드 밸런서: 서버에 집중되는 접속(트래픽)을 서버 여러 대나 네트워크에 분배하는 방식, 부하 분산 장치
2. ELB의 종류
   - ALB(Application Load Balancer)
     - HTTP, HTTPS에 가장 적합한 로드 밸런서
     - OSI 모형의 애플리케이션 계층(구체적인 통신을 제공하는 계층)에서 동작
     - 인스턴스와 로드 밸런서 사이의 토신은 암호화가 가능
     - 분배 대상으로 정적 IP 주소를 설정하고 그 IP를 가진 호스트(기기)로 전송할 수 없다.
     - 지원 프로토콜: HTTP, HTTPS
   - NLB(Network Load Balancer)
     - OSI 모형의 전송 계층(전송된 데이터의 제어를 담당하는 계층)에서 동작
     - 패킷(단편 데이터)밖에 볼 수 없기 때문에 ALB만큼 상세하게 분배할 수 없다
     - 분배 대상의 정적 IP 주소를 설정할 수 있고 서버에 접속한 클라이언트의 IP 주소를 그대로 서버에 전송하도록 설정할 수도 있다.
     - 지원 프로토콜: TCP,TLS
   - CLB(Classic Load Balancer)
     - 오래된 유형의 로드 밸런서
     - 앞으로 구축할 시스템에는 사용하지 않는 것을 권장
     - 지원 프로토콜: TCP, SSL/TLS, HTTP, HTTPS
3. ELB의 요금



### 10. 스냅샷: 서버 데이터 백업

- 관리 콘솔에서 볼륨 단위(스토리지 전체)로 선택해 생성, 생성한 스냅샷을 기반으로 EBS 볼륨을 생성하면 새로운 볼륨은 원래 볼륨의 복제가 된다.
- 데이터 수명 주기 관리자(Amazon DLM)를 사용해 스냅샷의 생성, 삭제를 자동화할 수 있다.



### 11. 오토 스케일링: 수요에 맞춰 EC2 대수를 증감

1. 오토 스케일링이란
   - 서버의 액세스 상태에 따라 서버 대수를 늘리거나 줄이는 기능
   - CloudWatch에서 서버의 부하 정보(CPU 부하, 네트워크 통신량 등) 데이터를 참조해 스케일링에 참고할 수도 있다.
   
2. 감시와 인스턴스 수의 결정

   - 인스턴스의 증감
     1. EC2 인스턴스가 정지한 경우에 분리하고 새로운 EC2 인스턴스를 생성하는 방법
     2. 일정에 맞춰 스케일링하는 방법
     3. CPU와 네트워크 부하를 참고하여 특정 임계 값을 넘을 때 인스턴스 수를 자동으로 증감하는 방법

   